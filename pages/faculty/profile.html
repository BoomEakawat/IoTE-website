<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IoT and Information Engineering, KMITL</title>
    <link rel="icon" type="images/jpg" href="images/logo.jpg">
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600;700&family=Sarabun:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/components/navbar.html">
    <link rel="stylesheet" href="/components/footer.html">
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="stylesheet" href="/styles/components/navbar.css">
    <link rel="stylesheet" href="/styles/components/hero.css">
    <link rel="stylesheet" href="/styles/components/footer.css">
    <link rel="stylesheet" href="/styles/pages/faculty.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="data.js"></script>
</head>
<body>
    <div id="navbar-placeholder"></div>

    <main class="hero-subpage fade-in">
        <section class="header">
            <div class="breadcrumb-container">
                <a href="/index.html" class="breadcrumb">Home</a>•
                <a href="/pages/faculty/faculty-iot.html" class="breadcrumb">Faculty-IoTE</a>•
                <span class="breadcrumb" id="display-breadcrumb-name">Loading...</span>
            </div>
        </section>

        <section class="body">
            <p class="highlight-title" id="display-full-title">Loading...</p>
            <div class="info-card">
                <div class="info-card-header"><i class="fas fa-user"></i> ข้อมูลติดต่อ</div>
                <div class="info-card-body split-view-profile">
                    <ul class="details-list">
                        <li><strong>ชื่อ - นามสกุล :</strong> <span id="display-name-th"></span> (<span id="display-name-en"></span>)</li>
                        <li><strong>ตำแหน่ง :</strong> <span id="display-position"></span></li>
                        <li><strong>E-MAIL :</strong> <span id="display-email"></span></li>
                        <li><strong>ห้องพัก :</strong> <span id="display-room"></span></li>
                    </ul>
                    <img src="" alt="Profile Image" id="display-image" class="profile-large">
                </div>
            </div>
            <div class="info-card">
                <div class="info-card-header"><i class="fa-solid fa-graduation-cap"></i> ประวัติการศึกษา</div>
                <div class="info-card-body split-view-body">
                    <ul class="details-list">
                        <li><strong>ปริญญาตรี :</strong> <span id="display-bachelor"></span></li>
                        <li><strong>ปริญญาโท :</strong> <span id="display-master"></span></li>
                        <li><strong>ปริญญาเอก :</strong> <span id="display-doctor"></span></li>
                    </ul>
                </div>
            </div>
            <div class="info-card">
                <div class="info-card-header"><i class="fa-solid fa-book-open"></i> ประสบการณ์</div>
                <div class="info-card-body split-view-body" id="experience">
                    <div class="details-list">
                        <p><strong>ความเชี่ยวชาญ</strong></p>
                        <ul class="details-list" id="display-expertise"></ul>
                    </div>
                    <div class="details-list">
                        <p><strong>งานวิจัย</strong></p>
                        <ul class="details-list" id="display-research"></ul>
                    </div>
                    <div id="research-image-gallery" class="gallery-container"></div>
                </div>
            </div>

        </section>
    </main>

    <div id="footer-placeholder"></div>

    <script src="/script.js"></script>
    <script src="/js/data.js"></script>
</body>
</html>


<script>
    const params = new URLSearchParams(window.location.search);
    const profId = params.get('id');

    // Combine all data sources into one searchable object
    const allData = { ...IoT_Aj, ...IoT_STF, ...Physiot_Aj, ...Physiot_STF };
    const prof = allData[profId];

    // Helper function to build lists (Expertise/Research)
    function renderList(listId, dataArray) {
        const listElement = document.getElementById(listId);
        if (!listElement) return;
        
        listElement.innerHTML = ""; 
        
        if (dataArray && Array.isArray(dataArray) && dataArray.length > 0) {
            dataArray.forEach(item => {
                const li = document.createElement('li');
                li.innerHTML = `<strong>•</strong> <span>${item}</span>`;
                listElement.appendChild(li);
            });
        } else {
            // Placeholder text if no data exists
            listElement.innerHTML = "<li class='placeholder-text'>ยังไม่มีข้อมูลในส่วนนี้ (No information available)</li>";
        }
    }

    if (prof) {
        // Update Breadcrumb and Header
        document.getElementById('display-breadcrumb-name').innerText = prof.nameTH;
        document.getElementById('display-full-title').innerText = `${prof.nameTH} (${prof.nameEN})`;

        // Update Contact Info
        document.getElementById('display-name-th').innerText = prof.nameTH;
        document.getElementById('display-name-en').innerText = prof.nameEN;
        document.getElementById('display-position').innerText = prof.position;
        document.getElementById('display-email').innerText = prof.email;
        document.getElementById('display-room').innerText = prof.room;
        document.getElementById('display-image').src = prof.image;

        // Update Education
        document.getElementById('display-bachelor').innerText = prof.bachelor || "-";
        document.getElementById('display-master').innerText = prof.master || "-";
        document.getElementById('display-doctor').innerText = prof.doctor || "-";

        // Render the Lists
        renderList('display-expertise', prof.expertise);

        // Render Multiple Research Images
        const researchGallery = document.getElementById('display-research');
        researchGallery.innerHTML = ""; 
            
        if (prof.researchData && prof.researchData.length > 0) {
            prof.researchData.forEach(item => {
                const itemContainer = document.createElement('div');
                itemContainer.className = "research-item";
                
                // Provide a default placeholder image if item.img is missing
                const displayImg = item.img || "/images/placeholders/no-image.png";
                
                itemContainer.innerHTML = `
                    <a href="${item.link || '#'}" target="_blank" class="research-link">
                        <img src="${displayImg}" class="research-thumb">
                        <p class="research-caption">${item.title || "Untitled Research"}</p>
                    </a>
                `;
                researchGallery.appendChild(itemContainer);
            });
        } else {
            // Show an empty state placeholder for the whole gallery
            researchGallery.innerHTML = "<p class='placeholder-text'>ไม่มีข้อมูลงานวิจัย (No research data found)</p>";
        }
    } else {
        console.error("Professor ID not found in data.");
    }
</script>